{% extends "base.html" %}
{% block content %}

<div class="container-fluid">
    <center><h1>Home!</h1></center>
    <div class="row">
        <hr>
        <div class="col-xs-9 col-md-4">
            <button type="button" id="bed1" class="btn btn-lg btn-danger">Bedroom 1 {{ state_bed1 }}</button>
        </div>
        <div class="col-xs-9 col-md-7">
            <div class="panel panel-default">
                <div class="panel-body">
                    <p>
                      <label for="amount">Timer:</label>
                      <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
                    </p>

                    <div id="slider-range-min"></div>
                    <br>
                    <button type="button" class="btn btn-default btn-md btn-success">
                        <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
                    </button>
                    <button type="button" class="btn btn-default btn-md btn-danger">
                        <span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span>
                    </button>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-body">
                    <p>
                        <label>ON:</label>
                        <input type="text" id="on" readonly style="border:0; color:#f6931f; font-weight:bold;">
                        <label>OFF:</label>
                        <input type="text" id="off" readonly style="border:0; color:#f6931f; font-weight:bold;">
                    </p>
                    <div id="slider-range"></div>
                    <br>
                    <button type="button" class="btn btn-default btn-md btn-success">
                        <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
                    </button>
                    <button type="button" class="btn btn-default btn-md btn-danger">
                        <span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-xs-9 col-md-4">
            <button type="button1" id="bed2" class="btn btn-lg btn-danger">Bedroom 2</button>
        </div>
        <div class="col-xs-9 col-md-7">
            <button type="button" class="btn btn-default btn-lg">
                <span class="glyphicon glyphicon-hourglass" aria-hidden="true"></span>
            </button>
            <button type="button" class="btn btn-default btn-lg">
                <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
            </button>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-xs-9 col-md-4">
            <button type="button2" id="lounge" class="btn btn-lg btn-danger">Lounge</button>
        </div>
        <div class="col-xs-9 col-md-7">
            <button type="button" class="btn btn-default btn-lg">
                <span class="glyphicon glyphicon-hourglass" aria-hidden="true"></span>
            </button>
            <button type="button" class="btn btn-default btn-lg">
                <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
            </button>
        </div>
    </div>
    <hr>
</div>

<script>

$("#lounge").click(function(){
    $.get("/testlounge",
    function(data){
        if(data='ON'){
              $("#lounge").toggleClass("btn-danger btn-success");
          }
    })
});

$("#bed1").click(function(){
    $.get("http://192.168.1.101/cgi-bin/relay.cgi?toggle",
    function(data){
        if(data='ON'){
            $("#bed1").toggleClass("btn-danger btn-success");
          }
    })
});

$("#bed2").click(function(){
$.get("/testbed2",
    function(data){
        if(data='ON'){
            $("#bed2").toggleClass("btn-danger btn-success");
          }
    })
});

$(function() {
    $( "#slider-range" ).slider({
      range: true,
      min: 0,
      max: 1440,
      step: 15,
      values: [ 60, 480 ],
      slide: function( event, ui ) {
            var hours1 = Math.floor(ui.values[0] / 60);
            var minutes1 = ui.values[0] - (hours1 * 60);

            if(hours1.length < 10) hours1= '0' + hours;
            if(minutes1.length < 10) minutes1 = '0' + minutes;

            if(minutes1 == 0) minutes1 = '00';

            var hours2 = Math.floor(ui.values[1] / 60);
            var minutes2 = ui.values[1] - (hours2 * 60);

            if(hours2.length < 10) hours2= '0' + hours;
            if(minutes2.length < 10) minutes2 = '0' + minutes;

            if(minutes2 == 0) minutes2 = '00';

            jQuery('#on').val(hours1+':'+minutes1);
            jQuery('#off').val(hours2+':'+minutes2 );
        }
    });
});


$(function() {
    $( "#slider-range-min" ).slider({
      range: "min",
      value: 90,
      min: 0,
      max: 600,
      step: 15,
      slide: function( event, ui ) {
            var hours1 = Math.floor(ui.value / 60);
            var minutes1 = ui.value - (hours1 * 60);

            if(hours1.length < 10) hours1= '0' + hours;
            if(minutes1.length < 10) minutes1 = '0' + minutes;

            if(minutes1 == 0) minutes1 = '00';

            jQuery('#amount').val(hours1+':'+minutes1);
      }
    });
});

</script>

{% endblock %}